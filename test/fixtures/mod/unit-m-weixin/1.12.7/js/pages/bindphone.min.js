define("unit-m-weixin@1.12.7/js/modules/bindphone/content/controller",["marionette@~1.4.0","backbone@~1.1.0","./view"],function(e,n,t){var i=e("marionette"),o=e("backbone"),a=e("./view");t.exports=i.Controller.extend({initialize:function(e){var n=o.Model.extend({initialize:function(e){this.set(e)}});this.dataModel=new n(e)},show:function(e){this.view=new a({model:this.dataModel}),e.show(this.view)}})},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@1.12.7/js/modules/bindphone/layout.html",[],function(e,n,t){t.exports='<div class="J_content"><div>'},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@1.12.7/js/modules/bindphone/content/view",["backbone@~1.1.0","marionette@~1.4.0","wepp@~2.7.0","zepto-wepp@~1.1.0","underscore@~1.5.0","./template.html"],function(e,n,t){var i=e("backbone"),o=e("marionette"),a=e("wepp").UI,s=(new i.Router,e("zepto-wepp")),d=e("underscore");t.exports=o.ItemView.extend({template:d.template(e("./template.html")),tagName:"div",events:{"click .J_getCaptcha":"sendCaptch","click .J_bind_submit":"verifyCode"},initialize:function(){},sendCaptch:function(){var e=s(".J_bind_phone").val(),n=this;/^1\d{10}$/.test(e)?(s(".J_bind_phone").attr("readonly",!0),s.ajax({url:"/ajax/tuan/sendverifycodegn.json",data:{phone:e,callid:parseInt((Math.random()+"").substr(2,15)),rebind:1},type:"POST",success:function(e){e.data;200==e.code?(n._timeout(),a.alert("验证码已发送"),s(".J_order_verify_code").removeClass("hide")):(a.alert("验证码发送失败"),s(".J_bind_phone").removeAttr("readonly"))}})):a.alert("无效手机号")},_timeout:function(){s(".J_getCaptcha").addClass("hide"),s(".J_getCaptcha_ing").removeClass("hide").html("60秒后重发"),self.timer=setInterval(function(){var e=parseInt(s(".J_getCaptcha_ing").html());1==e&&(clearInterval(self.timer),s(".J_getCaptcha_ing").addClass("hide"),s(".J_getCaptcha").removeClass("hide"),s(".J_bind_phone").removeAttr("readonly")),s(".J_getCaptcha_ing").html(e-1+"秒后重发")},1e3)},verifyCode:function(){{var e=s(".J_login_bindphone_input").val(),n=s(".J_bind_phone").val();this.model}return/^1\d{10}$/.test(n)?(s(".J_bind_submit").addClass("hide"),s(".J_un_bind_submit").removeClass("hide"),void s.ajax({url:"/ajax/tuan/BindPhonegn.json",data:{phone:n,code:e,callid:parseInt((Math.random()+"").substr(2,15))},type:"POST",success:function(e){e.data;200==e.code?(ThisApp.execute("order::phone::update",n),history.go(-1),s(".J_bind_submit").removeClass("hide"),s(".J_un_bind_submit").addClass("hide")):(a.alert("验证码有误"),s(".J_bind_submit").removeClass("hide"),s(".J_un_bind_submit").addClass("hide"))}})):(a.alert("无效手机号"),!1)}})},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@1.12.7/js/modules/bindphone/content/template.html",[],function(e,n,t){t.exports='<div class="Box"><h5>为保障团购安全，请绑定手机号</h5><div class="order-box"><ul><li><span class="infor">手机号&nbsp;</span><input id="J_phoneNum" class="phone-input J_bind_phone" placeholder="请输入手机号" type="text" name="mobile"><a class="s-btn Right J_getCaptcha"  href="javascript:void(0)">获取验证码</a><a class="g-btn Right J_getCaptcha_ing hide"  href="javascript:void(0)"></a></li><li><span class="infor">验证码&nbsp;</span><input  class="phone-input J_login_bindphone_input" placeholder="请输入验证码" type="text" name="mobile"></li></ul></div></div><div class="Box"><a class="y-btn J_bind_submit"  href="javascript:void(0)">提交</a><a class="n-btn hide J_un_bind_submit"  title="" href="javascript:void(0)">正在处理</a></div>'},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@1.12.7/js/pages/bindphone",["zepto-wepp@~1.1.0","underscore@~1.5.0","marionette@~1.4.0","../modules/bindphone/content/controller","../modules/bindphone/layout.html"],function(e,n){var t=(e("zepto-wepp"),e("underscore")),i=e("marionette"),o=e("../modules/bindphone/content/controller"),a=i.Controller.extend({show:function(n,i){var a=this;a.contentController=new o({groupId:n,dealId:i}),ThisApp.openPage().then(function(n){n.initRegion({template:t.template(e("../modules/bindphone/layout.html")),regions:{content:".J_content"}}),a.contentController.show(n.layout.content)})}});n.Controller=a},{asyncDeps:["iscroll@~5.0.9"]});