define("unit-m-weixin@latest/js/modules/bindphone/content/controller",["marionette@~1.4.0","backbone@~1.1.0","./view"],function(e,t,n){var i=e("marionette"),a=e("backbone"),o=e("./view");n.exports=i.Controller.extend({initialize:function(e){var t=a.Model.extend({initialize:function(e){this.set(e)}});this.dataModel=new t(e)},show:function(e){this.view=new o({model:this.dataModel}),e.show(this.view)}})},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@latest/js/modules/bindphone/layout.html",[],function(e,t,n){n.exports='<div class="J_content"><div>'},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@latest/js/modules/bindphone/content/view",["backbone@~1.1.0","marionette@~1.4.0","wepp@~2.7.0","zepto-wepp@~1.1.0","underscore@~1.5.0","./template.html"],function(e,t,n){var i=e("backbone"),a=e("marionette"),o=e("wepp").UI,s=(new i.Router,e("zepto-wepp")),l=e("underscore");n.exports=a.ItemView.extend({template:l.template(e("./template.html")),tagName:"div",events:{"click .J_getCaptcha":"sendCaptch","click .J_bind_submit":"verifyCode"},initialize:function(){},sendCaptch:function(){var e=s(".J_bind_phone").val(),t=this;/^1\d{10}$/.test(e)?(s(".J_bind_phone").attr("readonly",!0),s.ajax({url:"/ajax/tuan/sendverifycodegn.json",data:{phone:e,callid:parseInt((Math.random()+"").substr(2,15)),rebind:1},type:"POST",success:function(e){e.data;200==e.code?(t._timeout(),o.alert("验证码已发送"),s(".J_order_verify_code").removeClass("hide")):(o.alert("验证码发送失败"),s(".J_bind_phone").removeAttr("readonly"))}})):o.alert("无效手机号")},_timeout:function(){s(".J_getCaptcha").addClass("hide"),s(".J_getCaptcha_ing").removeClass("hide").html("60秒后重发"),self.timer=setInterval(function(){var e=parseInt(s(".J_getCaptcha_ing").html());1==e&&(clearInterval(self.timer),s(".J_getCaptcha_ing").addClass("hide"),s(".J_getCaptcha").removeClass("hide"),s(".J_bind_phone").removeAttr("readonly")),s(".J_getCaptcha_ing").html(e-1+"秒后重发")},1e3)},verifyCode:function(){{var e=s(".J_login_bindphone_input").val(),t=s(".J_bind_phone").val();this.model}return/^1\d{10}$/.test(t)?(s(".J_bind_submit").addClass("hide"),s(".J_un_bind_submit").removeClass("hide"),void s.ajax({url:"/ajax/tuan/BindPhonegn.json",data:{phone:t,code:e,callid:parseInt((Math.random()+"").substr(2,15))},type:"POST",success:function(e){e.data;200==e.code?(ThisApp.execute("order::phone::update",t),history.go(-1),s(".J_bind_submit").removeClass("hide"),s(".J_un_bind_submit").addClass("hide")):(o.alert("验证码有误"),s(".J_bind_submit").removeClass("hide"),s(".J_un_bind_submit").addClass("hide"))}})):(o.alert("无效手机号"),!1)}})},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@latest/js/modules/bindphone/content/template.html",[],function(e,t,n){n.exports='<div class="Box"><h5>为保障团购安全，请绑定手机号</h5><div class="order-box"><ul><li><span class="infor">手机号&nbsp;</span><input id="J_phoneNum" class="phone-input J_bind_phone" placeholder="请输入手机号" type="text" name="mobile"><a class="s-btn Right J_getCaptcha"  href="javascript:void(0)">获取验证码</a><a class="g-btn Right J_getCaptcha_ing hide"  href="javascript:void(0)"></a></li><li><span class="infor">验证码&nbsp;</span><input  class="phone-input J_login_bindphone_input" placeholder="请输入验证码" type="text" name="mobile"></li></ul></div></div><div class="Box"><a class="y-btn J_bind_submit"  href="javascript:void(0)">提交</a><a class="n-btn hide J_un_bind_submit"  title="" href="javascript:void(0)">正在处理</a></div>'},{asyncDeps:["iscroll@~5.0.9"]}),define("unit-m-weixin@latest/js/pages/bindphone",["zepto-wepp@~1.1.0","underscore@~1.5.0","marionette@~1.4.0","../modules/bindphone/content/controller","../modules/bindphone/layout.html"],function(e,t){var n=(e("zepto-wepp"),e("underscore")),i=e("marionette"),a=e("../modules/bindphone/content/controller"),o=i.Controller.extend({show:function(t,i){var o=this;o.contentController=new a({groupId:t,dealId:i}),ThisApp.openPage().then(function(t){t.initRegion({template:n.template(e("../modules/bindphone/layout.html")),regions:{content:".J_content"}}),o.contentController.show(t.layout.content)})}});t.Controller=o},{asyncDeps:["iscroll@~5.0.9"]});